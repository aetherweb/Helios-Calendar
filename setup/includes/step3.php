<?php
/**
 * This file is part of Helios Calendar, it's use is governed by the Helios Calendar Software License Agreement.
 *
 * @author Refresh Web Development LLC
 * @link http://www.refreshmy.com
 * @copyright (C) 2004-2012 Refresh Web Development
 * @license http://www.helioscalendar.com/license.html
 * @package Helios Calendar
 */
/*
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	|	Modifying or in anyway altering source code contained in this file is 	|
	|	not permitted and violates the Helios Calendar Software License Agreement	|
	|	DO NOT edit or reverse engineer any source code or files with this notice	|
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/
	if(!isset($_SESSION['license']) || $_SESSION['license'] == false || !isset($_SESSION['review']) || $_SESSION['review'] == false){
		hc_fail();
	} else {
		if(!isset($_POST['liccode'])){
			echo '
		<p>
			To retrieve your license code from your member account click "Refresh Members Site" to the right.
		</p>
		<form name="frm" id="frm" method="post" action="'.CalRoot.'/setup/index.php?step=3" onsubmit="return (document.getElementById(\'liccode\').value != \'\') ? true : false;">
		<fieldset>
			<label for="liccode">License Code:</label>
			<input size="50" type="text" name="liccode" id="liccode" value="" autofocus="autofocus" required="required" />
		</fieldset>
		<input type="submit" name="submit" id="submit" value="Confirm License" />
		</form>';
		} else {
			eval(base64_decode('LypJZiB5b3UgYXJlIHJlYWRpbmcgdGhpcyB5b3UgaGF2ZSB2aW9sYXRlZCB0aGUgSGVsaW9zIENhbGVuZGFyIFNvZnR3YXJlIExpY2Vuc2UgQWdyZWVtZW50Ki8NCmlmKCRfUE9TVFsnbGljY29kZSddID09ICJsb2NhbGhvc3QiICYmICRfU0VSVkVSWydIVFRQX0hPU1QnXSA9PSAibG9jYWxob3N0IiAmJiBzdHJwb3MoQ2FsUm9vdCwnbG9jYWxob3N0JykgIT09IGZhbHNlKXsNCgkkX1NFU1NJT05bJ3ZhbGlkJ10gPSB0cnVlOw0KCSRfU0VTU0lPTlsncmVnY29kZSddID0gImxvY2FsaG9zdF9vbmx5IjsNCgkkX1NFU1NJT05bJ3JlZ25hbWUnXSA9ICJEZXZlbG9wZXIiOw0KCSRfU0VTU0lPTlsncmVndXJsJ10gPSAibG9jYWxob3N0IjsNCgkkX1NFU1NJT05bJ3JlZ2VtYWlsJ10gPSAic3VwcG9ydEBoZWxpb3NjYWxlbmRhci5jb20iOw0KCWVjaG8gJw0KCQk8ZmllbGRzZXQ+DQoJCQk8cD4NCgkJCQlZb3VyIGxvY2FsaG9zdCBpbnN0YWxsYXRpb24gb2YgSGVsaW9zIENhbGVuZGFyIGhhcyBiZWVuIHZhbGlkYXRlZC4NCgkJCTwvcD4NCgkJCTxwPg0KCQkJCVRoaXMgaW5zdGFsbGF0aW9uIHdpbGwgb25seSBiZSB2aXNpYmxlIGZyb20gdGhlIGxvY2FsaG9zdCBhZGRyZXNzIGFuZCBpcyBsaWNlbnNlZCBmb3IgbG9jYWwgZGV2ZWxvcG1lbnQgdXNlIG9ubHkuDQoJCQkJPGJyIC8+PGI+QW55IG90aGVyIHVzYWdlIGlzIHByb2hpYml0ZWQgYW5kIHZpb2xhdGVzIHRoZSBIZWxpb3MgQ2FsZW5kYXIgU29mdHdhcmUgTGljZW5zZSBBZ3JlZW1lbnQ8L2I+DQoNCgkJCTwvcD4NCgkJPC9maWVsZHNldD4NCgkJPGlucHV0IG9uY2xpY2s9ImRvY3VtZW50LmxvY2F0aW9uLmhyZWY9XCcnIC4gQ2FsUm9vdCAuICcvc2V0dXAvaW5kZXgucGhwP3N0ZXA9NFwnOyIgdHlwZT0iYnV0dG9uIiBuYW1lPSJzdWJtaXQiIGlkPSJzdWJtaXQiIHZhbHVlPSJDb250aW51ZSIgLz4nOw0KfSBlbHNlIHsNCgkkaG9zdCA9ICJ2YWxpZGF0ZS5yZWZyZXNobXkuY29tIjsNCgkkZmlsZSA9ICIvaC5waHA/dj0yLjAuMiZjPSIgLiBzdHJpcF90YWdzKCRfUE9TVFsnbGljY29kZSddKSAuICImdT0iIC4gJF9TRVJWRVJbJ0hUVFBfSE9TVCddOw0KDQoJaWYoISRmcCA9IGZzb2Nrb3BlbigkaG9zdCwgODAsICRlcnJubywgJGVycnN0ciwgMSkpew0KCQllY2hvICcNCgkJPHA+DQoJCQlDb25uZWN0aW9uIHRvIHZhbGlkYXRpb24gc2VydmVyIGZhaWxlZC4gVGhlIGZvbGxvd2luZyBlcnJvciBtZXNzYWdlIHdhcyByZXR1cm5lZC4NCgkJCTxibG9ja3F1b3RlPkVycm9yICM6Jy4kZXJybm8uJyAtLSAnLiRlcnJzdHIuJzwvYmxvY2txdW90ZT4NCgkJCVBsZWFzZSB3YWl0IGEgZmV3IG1vbWVudHMgYW5kIHRyeSBhZ2Fpbi4gSWYgeW91IGNvbnRpbnVlIHRvIHJlY2VpdmUgdGhpcyBtZXNzYWdlIHBsZWFzZSBzdWJtaXQgYSBzdXBwb3J0IHRpY2tldCBmcm9tIHlvdXIgUmVmcmVzaCBNZW1iZXJzIFNpdGUgYWNjb3VudCBmb3IgYXNzaXN0YW5jZS4NCgkJPC9wPic7DQoJfSBlbHNlIHsNCgkJJHJlYWQgPSAiIjsNCgkJJHJlcXVlc3QgPSAiR0VUICRmaWxlIEhUVFAvMS4xXHJcbiI7DQoJCSRyZXF1ZXN0IC49ICJIb3N0OiAkaG9zdFxyXG4iOw0KCQkkcmVxdWVzdCAuPSAiQ29ubmVjdGlvbjogQ2xvc2VcclxuXHJcbiI7DQoJCWZ3cml0ZSgkZnAsICRyZXF1ZXN0KTsNCg0KCQl3aGlsZSAoIWZlb2YoJGZwKSkNCgkJCSRyZWFkIC49IGZyZWFkKCRmcCwxMDI0KTsNCg0KCQkkb3V0cHV0ID0gZXhwbG9kZSgiaGVsaW9zLy8iLCAkcmVhZCk7DQoJCWlmKGlzc2V0KCRvdXRwdXRbMV0pKXsNCgkJCSRyZWdEYXRhID0gZXhwbG9kZSgiLy8iLCBiYXNlNjRfZGVjb2RlKCRvdXRwdXRbMV0pKTsNCgkJCSRfU0VTU0lPTlsndmFsaWQnXSA9IHRydWU7DQoJCQkkX1NFU1NJT05bJ3JlZ2NvZGUnXSA9IHN0cmlwX3RhZ3MoJF9QT1NUWydsaWNjb2RlJ10pOw0KCQkJJF9TRVNTSU9OWydyZWduYW1lJ10gPSAkcmVnRGF0YVswXTsNCgkJCSRfU0VTU0lPTlsncmVndXJsJ10gPSAkcmVnRGF0YVsyXTsNCgkJCSRfU0VTU0lPTlsncmVnZW1haWwnXSA9ICRyZWdEYXRhWzFdOw0KDQoJCQllY2hvICcNCgkJPGZpZWxkc2V0Pg0KDQoJCQlQbGVhc2UgcmV2aWV3IHlvdXIgbGljZW5zZSBpbmZvcm1hdGlvbiBiZWxvdyB0aGVuIGNsaWNrICJDb250aW51ZSIuDQoJCQk8dWw+DQoJCQkJPGxpPjxzcGFuPkxpY2Vuc2UgQ29kZTo8L3NwYW4+Jy5zdHJpcF90YWdzKCRfUE9TVFsnbGljY29kZSddKS4nPC9saT4NCgkJCQk8bGk+PHNwYW4+TGljZW5zZWU6PC9zcGFuPicuJHJlZ0RhdGFbMF0uJzwvbGk+DQoJCQkJPGxpPjxzcGFuPkxpY2Vuc2VlIEVtYWlsOjwvc3Bhbj4nLiRyZWdEYXRhWzFdLic8L2xpPg0KCQkJCTxsaT48c3Bhbj5MaWNlbnNlZCBVUkw6PC9zcGFuPicuJHJlZ0RhdGFbMl0uJzwvbGk+DQoNCgkJCTwvdWw+DQoJCTwvZmllbGRzZXQ+DQoJCTxpbnB1dCBvbmNsaWNrPSJkb2N1bWVudC5sb2NhdGlvbi5ocmVmPVwnJyAuIENhbFJvb3QgLiAnL3NldHVwL2luZGV4LnBocD9zdGVwPTRcJzsiIHR5cGU9ImJ1dHRvbiIgbmFtZT0ic3VibWl0IiBpZD0ic3VibWl0IiB2YWx1ZT0iQ29udGludWUiIC8+JzsNCgkJfSBlbHNlIHsNCgkJCWVjaG8gJw0KCQk8ZmllbGRzZXQ+DQoJCQk8Yj5Zb3VyIExpY2Vuc2UgQ29kZSBjb3VsZCBub3QgYmUgY29uZmlybWVkLiBUaGlzIGNhbiBoYXBwZW4gZm9yIHNldmVyYWwgcmVhc29ucy48L2I+DQoJCQk8dWwgY2xhc3M9ImJ1bGxldGVkIj4NCgkJCQk8bGk+WW91ciB3ZWIgc2VydmVyIHdhcyB1bmFibGUgdG8gY29ubmVjdCB0byBSZWZyZXNoIFdlYiBEZXZlbG9wbWVudFwncyB2YWxpZGF0aW9uIHNlcnZlci48L2xpPg0KCQkJCTxsaT5Zb3VyIExpY2Vuc2UgQ29kZSB3YXMgZW50ZXJlZCBpbmNvcnJlY3RseSAoY29uZmlybSBpdCBpbiB5b3VyIG1lbWJlciBhY2NvdW50KS48L2xpPg0KDQoJCQkJPGxpPllvdXIgTGljZW5zZSBDb2RlIHdhcyBjb3BpZWQgJmFtcDsgcGFzdGVkIGluY29ycmVjdGx5ICh3aXRoIGFuIGV4dHJhIHNwYWNlL2NoYXJhY3RlcikuPC9saT4NCgkJCQk8bGk+WW91ciBMaWNlbnNlZCBEb21haW4gYW5kIHRoZSBjdXJyZW50IGluc3RhbGwgcG9pbnQgZG8gbm90IG1hdGNoLjwvbGk+DQoJCQkJPGxpPllvdSBhcmUgaW5zdGFsbGluZyBhIHZlcnNpb24gb2YgSGVsaW9zIENhbGVuZGFyIHlvdXIgbGljZW5zZSBpcyBub3QgYXV0aG9yaXplZCBmb3IuPC9saT4NCgkJCQk8bGk+WW91ciBMaWNlbnNlIENvZGUgaXMgaW52YWxpZC48L2xpPg0KCQkJPC91bD4NCg0KCQkJPHAgc3R5bGU9InBhZGRpbmctdG9wOjE1cHg7Ij4NCg0KCQkJCTxiPlRvIHByb2NlZWQgeW91IHNob3VsZDo8L2I+DQoJCQk8L3A+DQoJCQk8b2w+DQoJCQkJPGxpPkxvZ2luIHRvIHlvdXIgbWVtYmVyIGFjY291bnQgJmFtcDsgY29uZmlybSB5b3VyIExpY2Vuc2UgQ29kZS48L2xpPg0KCQkJCTxsaT5Db25maXJtIHlvdXIgY3VycmVudCBpbnN0YWxsIHBvaW50IG1hdGNoZXMgeW91ciBsaWNlbnNlZCBkb21haW48L2xpPg0KDQoJCQkJPGxpPkNsaWNrICJUcnkgQWdhaW4iIGJlbG93IGFuZCBlbnRlciB5b3VyIGNvbmZpcm1lZCBMaWNlbnNlIENvZGUuPC9saT4NCg0KCQkJPC9vbD4NCgkJCTxwIHN0eWxlPSJwYWRkaW5nLXRvcDoxNXB4OyI+DQoJCQkJPGI+Tm90ZTo8L2I+IElmIHlvdSBsaWNlbnNlZCB5b3VyIGRvbWFpbiB3aXRoIHRoZSAid3d3LiIgcHJlZml4IHlvdXIgQ2FsUm9vdCAmYW1wOyBBZG1pblJvb3QgbXVzdCBhbHNvIGluY2x1ZGUgInd3dy4iDQoJCQkJTGlrZXdpc2UsIGlmIHlvdSByZWdpc3RlcmVkIHlvdXIgbGljZW5zZSB3aXRob3V0IHRoZSAid3d3LiIgcHJlZml4IHlvdXIgQ2FsUm9vdCAmYW1wOyBBZG1pblJvb3Qgc2hvdWxkIG5vdCBpbmNsdWRlICJ3d3cuIg0KCQkJPC9wPg0KDQoJCQk8cD4NCgkJCQlJZiB5b3UgY29udGludWUgdG8gcmVjZWl2ZSB0aGlzIG1lc3NhZ2UgYWZ0ZXIgcGVyZm9ybWluZyB0aGUgc3RlcHMgYWJvdmUgcGxlYXNlIHN1Ym1pdCBhIHN1cHBvcnQgdGlja2V0IGZyb20geW91ciBSZWZyZXNoIE1lbWJlcnMgU2l0ZSBhY2NvdW50IGZvciBhc3Npc3RhbmNlLg0KCQkJPC9wPg0KDQoJCTwvZmllbGRzZXQ+DQoJCTxpbnB1dCBvbmNsaWNrPSJkb2N1bWVudC5sb2NhdGlvbi5ocmVmPVwnJyAuIENhbFJvb3QgLiAnL3NldHVwL2luZGV4LnBocD9zdGVwPTNcJzsiIHR5cGU9ImJ1dHRvbiIgbmFtZT0iYnRuIiBpZD0iYnRuIiB2YWx1ZT0iVHJ5IEFnYWluIiAvPic7DQoJCX0NCgkJZmNsb3NlKCRmcCk7DQoJfQ0KfQ=='));
		}
	}	
?>